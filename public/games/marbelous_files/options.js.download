pc.script.create('options', function (app) {
    // Creates a new Options instance
    var Options = function (entity) {
        this.entity = entity;
    };
    
    var opt = false;
    var s1 = "a";
    var s2 = "a";
    var s3 = "a";
    var element = "";
    var name = "";
    var namel = "";

    Options.prototype = {
        // Called once after all resources are loaded and before the first update
        initialize: function () {
            if(isNaN(localStorage.mov)){
                localStorage.mov = s1 + s2 + s3;
            }
            this.mov = localStorage.mov;
            s1 = this.mov.charAt(0);
            s2 = this.mov.charAt(1);
            s3 = this.mov.charAt(2);
            this.makeButton(name,"opt","&#9881", "96%", "60px","0%","4%",17,"5");
            this.makeButton(name,"soundRBtn","Music: On", "20%", "20%","10%","60%",18,"4");
            this.makeButton(name,"musicRBtn","Sound: On", "20%", "20%","35%","60%",19,"4");
            this.makeButton(name,"difficultyRBtn","Difficulty: Normal", "20%", "20%","60%","60%",20,"4");
            this.makeBackground();
            document.getElementById("thinger").appendChild(document.getElementById("soundRBtn"));
            document.getElementById("thinger").appendChild(document.getElementById("musicRBtn"));
            document.getElementById("thinger").appendChild(document.getElementById("difficultyRBtn"));
        },
        
        makeButton: function(namel, idl, named, position, height, top,width,number,index){
            namel = document.createElement('button');
            namel.style.position = 'absolute';
            namel.style.width = width;
            namel.style.height = height;
            namel.style.top = top;
            namel.style.left = position;
            namel.style.textAlign = 'center';
            namel.style.color = 'white';
            namel.style.fontSize = 'xx-large';
            namel.style.border = '5px ridge #202020';
            namel.style.borderRadius = '5px';
            namel.style.backgroundColor = '#000033';
            namel.style.zIndex = index;
            namel.id = idl;
            this.namel = namel;
            this.namel.addEventListener("mouseover", function(){
                app.context.root.findByName('defaultCamera').script.Menu.mouseOver(number);
            });
            this.namel.addEventListener("mouseout", function(){
                app.context.root.findByName('defaultCamera').script.Menu.mouseOut(number);
            });
            this.namel.innerHTML = named;
            document.body.appendChild(namel);
            
        },
        
        makeBackground: function(){
            element = document.createElement('div');
            element.style.position = 'absolute';
            element.style.width = "100%";
            element.style.height = "100%";
            element.style.left = "100%";
            element.style.top = "0%";
            element.style.borderWidth = "0px";
            element.style.backgroundColor = '#FFFFFF';
            element.id = "thinger";
            element.style.zIndex = '4';
            document.body.appendChild(element);
        },

        // Called every frame, dt is time in seconds since last update
        update: function (dt) {
            if(opt === true){
                document.getElementById("opt").onclick = function(){
                    opt = false;
                    console.log("Yay");
                };
            }
            if(opt === false){
                document.getElementById("opt").onclick = function(){
                    opt = true;
                    console.log("Hay");
                };
            }
            document.getElementById("soundRBtn").onclick = function(){
                if(s1 == "a"){
                    s1 = "b";
                    return;
                }
                if(s1 == "b"){
                    s1 = "a";
                    return;
                }
            };
            document.getElementById("musicRBtn").onclick = function(){
                if(s2 == "a"){
                    s2 = "b";
                    return;
                }
                if(s2 == "b"){
                    s2 = "a";
                    return;
                }
            };
            document.getElementById("difficultyRBtn").onclick = function(){
                if(s3 == "a"){
                    s3 = "b";
                    return;
                }
                if(s3 == "b"){
                    s3 = "c";
                    return;
                }
                if(s3 == "c"){
                    s3 = "a";
                    return;
                }
            };
            if(s1 == "a"){
                app.context.root.findByName('soundeffects').audiosource.volume = 1.5;
                app.context.root.findByName('soundeffects1').audiosource.volume = 1;
                app.context.root.findByName('soundeffects2').audiosource.volume = 1;
                document.getElementById("soundRBtn").innerHTML = "Sound: On";
            } else if (s1 == "b"){
                app.context.root.findByName('soundeffects').audiosource.volume = 0;
                app.context.root.findByName('soundeffects1').audiosource.volume = 0;
                app.context.root.findByName('soundeffects2').audiosource.volume = 0;
                document.getElementById("soundRBtn").innerHTML = "Sound: Off";
            }
            
            if(s2 == "a"){
                app.context.root.findByName('Tutorial').audiosource.enabled = true;
                app.context.root.findByName('BossArena').audiosource.enabled = true;
                app.context.root.findByName('Chapter1').audiosource.enabled = true;
                app.context.root.findByName('Chapter2').audiosource.enabled = true;
                app.context.root.findByName('Chapter3').audiosource.enabled = true;
                app.context.root.findByName('Level31').audiosource.enabled = true;
                app.context.root.findByName('Level31').audiosource.enabled = true;
                app.context.root.findByName('Menu').audiosource.enabled = true;
                app.context.root.findByName('defaultCamera').script.Menu.reloadMusic();
                document.getElementById("musicRBtn").innerHTML = "Music: On";
            } else if (s2 == "b"){
                app.context.root.findByName('Tutorial').audiosource.enabled = false;
                app.context.root.findByName('BossArena').audiosource.enabled = false;
                app.context.root.findByName('Chapter1').audiosource.enabled = false;
                app.context.root.findByName('Chapter2').audiosource.enabled = false;
                app.context.root.findByName('Chapter3').audiosource.enabled = false;
                app.context.root.findByName('Level31').audiosource.enabled = false;
                app.context.root.findByName('Level31').audiosource.enabled = false;
                app.context.root.findByName('Menu').audiosource.enabled = false;
                document.getElementById("musicRBtn").innerHTML = "Music: Off";
            }
            
            if(s3 == "a"){
                app.context.root.findByName("ball").script.movement.normal();
                document.getElementById("difficultyRBtn").innerHTML = "Difficulty: Normal";
            } else if(s3 == "b"){
                app.context.root.findByName("ball").script.movement.hard();
                document.getElementById("difficultyRBtn").innerHTML = "Difficulty: Hard";
            } else if(s3 == "c"){
                app.context.root.findByName("ball").script.movement.easy();
                document.getElementById("difficultyRBtn").innerHTML = "Difficulty: Easy";
            }
            
            if(opt === false){
                document.getElementById("thinger").style.left = "100%";
                app.context.root.findByName("ball").enabled = true;
                console.log("Day");
            } else if(opt === true){
                document.getElementById("thinger").style.left = "0%";
                app.context.root.findByName("ball").enabled = false;
                console.log("Blay");
            }
            
            localStorage.mov = s1 + s2 + s3;
        }
    };

    return Options;
});